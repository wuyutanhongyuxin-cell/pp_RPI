# =============================================================================
# RPI Bot 配置文件 (研究优化版)
# =============================================================================
# 复制此文件为 .env 并填入你的配置

# =============================================================================
# 账号配置 (二选一)
# =============================================================================

# 方式1: 单账号配置
PARADEX_L2_PRIVATE_KEY=0x你的L2私钥
PARADEX_L2_ADDRESS=0x你的L2地址

# 方式2: 多账号配置 (格式: 私钥1,地址1;私钥2,地址2;...)
# PARADEX_ACCOUNTS=0x私钥1,0x地址1;0x私钥2,0x地址2;0x私钥3,0x地址3

# =============================================================================
# 交易配置
# =============================================================================

# 交易市场
MARKET=BTC-USD-PERP

# 每笔交易大小 (BTC)
TRADE_SIZE=0.001

# 交易周期间隔 (秒)
TRADE_INTERVAL=3.0

# 环境: prod (主网) 或 testnet (测试网)
PARADEX_ENVIRONMENT=prod

# =============================================================================
# 基础风控参数
# =============================================================================

# 最大允许价差百分比 - 超过此值跳过交易
MAX_SPREAD_PCT=0.012

# 止盈百分比 (被 RISK_REWARD_RATIO 覆盖)
MIN_PROFIT_PCT=0.02

# 止损百分比
STOP_LOSS_PCT=0.015

# 等待止盈/止损最长时间 (秒)
MAX_WAIT_SECONDS=15

# 检查价格间隔 (秒)
CHECK_INTERVAL=0.3

# =============================================================================
# 波动率过滤
# =============================================================================

# 是否启用波动率过滤
VOLATILITY_FILTER=false

# 最大允许波动率百分比
MAX_VOLATILITY_PCT=0.08

# 波动率检测窗口 (秒)
VOLATILITY_WINDOW=5

# =============================================================================
# 入场模式
# =============================================================================

# 入场模式选择:
#   trend          = 趋势跟随 (连续上涨才入场)
#   mean_reversion = 均值回归 (下跌+买压大时入场)
#   hybrid         = 混合模式 (先尝试趋势，失败则尝试均值回归)
ENTRY_MODE=trend

# 趋势过滤
TREND_FILTER=true

# 订单簿不平衡阈值 (旧参数，被 DIRECTION_SIGNAL_THRESHOLD 替代)
ORDERBOOK_THRESHOLD=0.0

# =============================================================================
# 动态止损
# =============================================================================

# 是否启用动态止损 - 基于spread自动计算止损位
DYNAMIC_STOP_LOSS=false

# 止损倍数 - 止损 = spread × 此值
STOP_LOSS_MULTIPLIER=1.5

# =============================================================================
# 研究优化参数 (新增)
# =============================================================================

# === 平仓模式 ===
# market = 市价单平仓 (支付点差，但能获得RPI)
# limit  = 限价单平仓 (赚取点差，POST_ONLY模式)
EXIT_ORDER_TYPE=limit

# === 方向信号 ===
# 订单簿不平衡度阈值 - |imbalance| > 此值才入场
# 0.3 表示买卖压差距超过30%才有信号
DIRECTION_SIGNAL_THRESHOLD=0.3

# === 风险收益比 ===
# 止盈 = 止损 * 此值
# 2.0 表示止盈是止损的2倍 -> 只需33%胜率就能盈亏平衡
RISK_REWARD_RATIO=2.0

# === 时段过滤 (UTC时间) ===
TIME_FILTER=true
OPTIMAL_HOURS_START=8
OPTIMAL_HOURS_END=21
WEEKEND_MULTIPLIER=0.5

# === Kelly准则仓位管理 ===
KELLY_ENABLED=true
KELLY_FRACTION=0.25
MAX_POSITION_PCT=0.20

# === 回撤控制 ===
DRAWDOWN_CONTROL=true
MAX_DAILY_LOSS_PCT=0.03
MAX_TOTAL_LOSS_PCT=0.10

# =============================================================================
# 其他配置
# =============================================================================

# Client ID 格式
CLIENT_ID_FORMAT=timestamp
