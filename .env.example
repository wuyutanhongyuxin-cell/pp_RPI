# =============================================================================
# RPI Bot v2.2 - 专业量化配置
# =============================================================================
# 复制此文件为 .env 并填入你的配置

# =============================================================================
# 账号配置 (二选一)
# =============================================================================

# 方式1: 单账号配置
PARADEX_L2_PRIVATE_KEY=0x你的L2私钥
PARADEX_L2_ADDRESS=0x你的L2地址

# 方式2: 多账号配置 (格式: 私钥1,地址1;私钥2,地址2;...)
# PARADEX_ACCOUNTS=0x私钥1,0x地址1;0x私钥2,0x地址2;0x私钥3,0x地址3

# 环境: prod (主网) 或 testnet (测试网)
PARADEX_ENVIRONMENT=prod

# =============================================================================
# 核心交易参数
# =============================================================================
MARKET=BTC-USD-PERP
TRADE_SIZE=0.001
TRADE_INTERVAL=8.0

# =============================================================================
# 风控核心 (最重要的参数)
# =============================================================================
# Spread限制：降低到1%，只在流动性好时交易
MAX_SPREAD_PCT=0.010

# 止损：放宽到3%，避免被噪音止损
STOP_LOSS_PCT=0.030

# 风险收益比：降低到1.0，在低胜率下更容易止盈
RISK_REWARD_RATIO=1.0

# 等待时间：增加到30秒，给价格更多时间到达目标
MAX_WAIT_SECONDS=30
CHECK_INTERVAL=0.3

# =============================================================================
# 入场策略 (严格过滤)
# =============================================================================
ENTRY_MODE=trend
TREND_FILTER=true

# 方向信号阈值：提高到0.45，只在强信号时入场
DIRECTION_SIGNAL_THRESHOLD=0.45

# 波动率过滤：关闭（RPI策略需要一定波动）
VOLATILITY_FILTER=false

# 动态止损：关闭（使用自适应止损替代）
DYNAMIC_STOP_LOSS=false

# =============================================================================
# v2.2 量化信号增强 (核心优化)
# =============================================================================
QUANT_SIGNALS=true

# RSI：使用极端值过滤
RSI_ENABLED=true
RSI_PERIOD=14
RSI_OVERSOLD=25
RSI_OVERBOUGHT=75

# VWAP：开启
VWAP_ENABLED=true

# 订单流：开启
ORDER_FLOW_ENABLED=true

# 最小信号强度：0.55，要求多信号一致
MIN_SIGNAL_STRENGTH=0.55

# =============================================================================
# v2.2 自适应止损
# =============================================================================
ADAPTIVE_STOP_LOSS=true
ADAPTIVE_STOP_BASE=0.025
ADAPTIVE_STOP_VOLATILITY_MULT=1.2

# =============================================================================
# v2.2 连续亏损控制 + 自动冷却恢复
# =============================================================================
MAX_CONSECUTIVE_LOSSES=4
# 冷却时间（秒），连续亏损后等待的冷却时间
COOLDOWN_SECONDS=600
# 恢复交易需要的spread上限（低于此值才恢复）
COOLDOWN_RECOVERY_SPREAD=0.008
# 恢复交易需要的imbalance绝对值下限（高于此值才恢复，表示有明确方向）
COOLDOWN_RECOVERY_IMBALANCE=0.45

# =============================================================================
# 平仓策略
# =============================================================================
# limit = 限价单平仓 (赚取点差)
# market = 市价单平仓 (支付点差)
EXIT_ORDER_TYPE=limit

# =============================================================================
# 时段过滤
# =============================================================================
TIME_FILTER=true
OPTIMAL_HOURS_START=8
OPTIMAL_HOURS_END=20
WEEKEND_MULTIPLIER=0.5

# =============================================================================
# Kelly仓位管理
# =============================================================================
KELLY_ENABLED=true
KELLY_FRACTION=0.15
MAX_POSITION_PCT=0.10

# =============================================================================
# 回撤控制 (严格)
# =============================================================================
DRAWDOWN_CONTROL=true
MAX_DAILY_LOSS_PCT=0.015
MAX_TOTAL_LOSS_PCT=0.05

# =============================================================================
# 尾随止盈
# =============================================================================
TRAILING_STOP=true
TRAILING_TRIGGER_RR=0.8
TRAILING_DISTANCE_PCT=0.4

# =============================================================================
# 其他
# =============================================================================
CLIENT_ID_FORMAT=timestamp
